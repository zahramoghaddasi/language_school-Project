<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <title>ÙˆÛŒØ±Ø§ÛŒØ´ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</title>
    <style>
        body { 
            font-family: Tahoma, Arial, sans-serif; 
            background: #f5f5f5; 
            margin: 0; 
            padding: 0; 
        }
        
        .header { 
            background: #2c3e50; 
            color: white; 
            padding: 20px; 
            text-align: center; 
        }
        
        .container { 
            max-width: 900px; 
            margin: 30px auto; 
            padding: 20px; 
        }
        
        .card { 
            background: white; 
            padding: 30px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
            margin-bottom: 20px;
        }
        
        .btn { 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            text-decoration: none; 
            display: inline-block; 
            font-size: 16px; 
        }
        
        .btn-save { 
            background: #27ae60; 
            color: white; 
        }
        
        .btn-back { 
            background: #7f8c8d; 
            color: white; 
        }
        
        .btn-info { 
            background: #17a2b8; 
            color: white; 
        }
        
        .form-group { 
            margin-bottom: 20px; 
        }
        
        label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: bold; 
            color: #333; 
        }
        
        select, input { 
            width: 100%; 
            padding: 10px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
            font-size: 16px; 
            box-sizing: border-box; 
        }
        
        select:focus, input:focus { 
            border-color: #3498db; 
            outline: none; 
        }
        
        .info-box { 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 5px; 
            margin-bottom: 20px; 
            border-right: 4px solid #3498db; 
        }
        
        .info-box p { 
            margin: 5px 0; 
            color: #555; 
        }
        
        .form-row { 
            display: flex; 
            gap: 20px; 
            margin-bottom: 20px; 
        }
        
        .form-row .form-group { 
            flex: 1; 
        }
        
        .payment-section {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border: 1px solid #d1ecf1;
        }
        
        .payment-section h3 {
            margin-top: 0;
            color: #0c5460;
            border-bottom: 2px solid #bee5eb;
            padding-bottom: 10px;
        }
        
        .payment-info {
            background: #d4edda;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .payment-info p {
            margin: 8px 0;
            color: #155724;
        }
        
        @media (max-width: 768px) {
            .container { 
                padding: 10px; 
                margin: 10px; 
            }
            
            .form-row { 
                flex-direction: column; 
                gap: 0; 
            }
            
            .card { 
                padding: 20px; 
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“ ÙˆÛŒØ±Ø§ÛŒØ´ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª</h1>
        <p>ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</p>
    </div>
    
    <div class="container">
        <div style="margin-bottom: 20px;">
            <a href="/registrations" class="btn btn-back">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…â€ŒÙ‡Ø§</a>
        </div>
        
        <div class="card">
            <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ù„ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
            <div class="info-box">
                <h3 style="margin-top: 0; color: #2c3e50;">Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ù„ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h3>
                <p><strong>Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…:</strong> {{ registration.registration_id }}</p>
                <p><strong>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:</strong> {{ registration.student_name }}</p>
                <p><strong>ØªÙ„ÙÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:</strong> {{ registration.student_phone }}</p>
                <p><strong>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…:</strong> {{ registration.registration_date.strftime('%Y-%m-%d') if registration.registration_date else '' }}</p>
            </div>
            
            <form method="POST" action="{{ url_for('edit_registration', id=registration.registration_id) }}">
                <div class="form-row">
                    <div class="form-group">
                        <label for="membership_id">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² *</label>
                        <select id="membership_id" name="membership_id" required>
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option>
                            {% for student in students %}
                                <option value="{{ student.membership_id }}" 
                                    {% if student.membership_id == registration.membership_id %}selected{% endif %}>
                                    {{ student.full_name }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="class_id">Ú©Ù„Ø§Ø³ *</label>
                        <select id="class_id" name="class_id" required>
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„Ø§Ø³</option>
                            {% for class in classes %}
                                <option value="{{ class.class_id }}" 
                                    {% if class.class_id == registration.class_id %}selected{% endif %}>
                                    {{ class.class_name }} 
                                    {% if class.registered and class.capacity %}
                                        ({{ class.registered }}/{{ class.capacity }})
                                    {% endif %}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                
                <!-- Ø¨Ø®Ø´ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª -->
                <div class="payment-section">
                    <h3>ğŸ’° Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª</h3>
                    
                    {% if registration.amount %}
                    <div class="payment-info">
                        <p><strong>Ù¾Ø±Ø¯Ø§Ø®Øª ÙØ¹Ù„ÛŒ:</strong> {{ "{:,.0f}".format(registration.amount) }} ØªÙˆÙ…Ø§Ù†</p>
                        <p><strong>Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª:</strong> {{ registration.payment_method or 'ØªØ¹ÛŒÛŒÙ† Ù†Ø´Ø¯Ù‡' }}</p>
                        <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> {{ registration.payment_status or 'ØªØ¹ÛŒÛŒÙ† Ù†Ø´Ø¯Ù‡' }}</p>
                    </div>
                    {% endif %}
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="amount">Ù…Ø¨Ù„Øº Ù¾Ø±Ø¯Ø§Ø®Øª (ØªÙˆÙ…Ø§Ù†)</label>
                            <input type="number" id="amount" name="amount" 
                                   value="{{ registration.amount if registration.amount else '' }}" 
                                   placeholder="Ù…Ø«Ø§Ù„: 1000000">
                        </div>
                        
                        <<select id="payment_method" name="payment_method">
    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø±ÙˆØ´</option>
    <option value="Ù†Ù‚Ø¯" {% if registration.payment_method == 'Ù†Ù‚Ø¯' or registration.payment_method == 'Ù†Ù‚Ø¯ÛŒ' %}selected{% endif %}>Ù†Ù‚Ø¯</option>
    <option value="Ú©Ø§Ø±Øª" {% if registration.payment_method == 'Ú©Ø§Ø±Øª' or registration.payment_method == 'Ú©Ø§Ø±Øª Ø¨Ù‡ Ú©Ø§Ø±Øª' %}selected{% endif %}>Ú©Ø§Ø±Øª</option>
    <option value="Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø§Ù†Ú©ÛŒ" {% if registration.payment_method == 'Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø§Ù†Ú©ÛŒ' %}selected{% endif %}>Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø§Ù†Ú©ÛŒ</option>
    <option value="Ø¢Ù†Ù„Ø§ÛŒÙ†" {% if registration.payment_method == 'Ø¢Ù†Ù„Ø§ÛŒÙ†' or registration.payment_method == 'Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†' %}selected{% endif %}>Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†</option>
</select>
                        
                        <div class="form-group">
                            <label for="payment_status">ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±Ø¯Ø§Ø®Øª</label>
                            <select id="payment_status" name="payment_status">
                                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ¶Ø¹ÛŒØª</option>
                                <option value="Ø§Ù†ØªØ¸Ø§Ø±" {% if registration.payment_status == 'Ø§Ù†ØªØ¸Ø§Ø±' %}selected{% endif %}>Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</option>
                                <option value="ØªÚ©Ù…ÛŒÙ„" {% if registration.payment_status == 'ØªÚ©Ù…ÛŒÙ„' %}selected{% endif %}>ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</option>
                                <option value="Ú©Ù†Ø³Ù„" {% if registration.payment_status == 'Ú©Ù†Ø³Ù„' %}selected{% endif %}>Ú©Ù†Ø³Ù„ Ø´Ø¯Ù‡</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px; color: #666; font-size: 14px;">
                        <p><strong>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ:</strong></p>
                        <ul>
                            <li>Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù¾Ø±Ø¯Ø§Ø®Øª Ø¬Ø¯ÛŒØ¯ØŒ Ù…Ø¨Ù„Øº Ùˆ Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</li>
                            <li>Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯</li>
                            <li>Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ù¾Ø±Ø¯Ø§Ø®ØªØŒ Ù…Ø¨Ù„Øº Ø±Ø§ 0 ÛŒØ§ Ø®Ø§Ù„ÛŒ Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯</li>
                        </ul>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                    <a href="/registrations" class="btn btn-back">Ø§Ù†ØµØ±Ø§Ù</a>
                    <button type="submit" class="btn btn-save">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
                </div>
            </form>
        </div>
        
        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù…Ú©â€ŒÚ©Ù†Ù†Ø¯Ù‡ -->
        <div class="card" style="background: #f0f8ff;">
            <h3 style="margin-top: 0; color: #2c3e50;">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ</h3>
            <ul style="color: #555; line-height: 1.6;">
                <li>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ùˆ Ú©Ù„Ø§Ø³ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯.</li>
                <li>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ± Ù†ÛŒØ³Øª.</li>
                <li>Ø§Ú¯Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø± Ú©Ù„Ø§Ø³ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ú©Ø§Ù† Ø«Ø¨Øª Ù…Ø¬Ø¯Ø¯ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</li>
                <li>Ø§Ú¯Ø± Ú©Ù„Ø§Ø³ Ø¸Ø±ÙÛŒØª ØªÚ©Ù…ÛŒÙ„ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¢Ù† Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯.</li>
                <li>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ù‡Ù…ÛŒÙ† ØµÙØ­Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ø±Ø§ Ø«Ø¨Øª ÛŒØ§ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯.</li>
            </ul>
        </div>
    </div>
</body>
</html>